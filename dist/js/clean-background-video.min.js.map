{"version":3,"sources":["scripts.js","components/clean-background-video.js"],"names":["document","addEventListener","event","window","NodeList","prototype","forEach","isIE11","MSInputMethodContext","documentMode","CleanBackgroundVideo","cleanBackgroundVideo","arguments","length","undefined","options","_classCallCheck","this","cleanBackgroundVideos","_objectSpread","setDimensions","debounce","bind","bindEvents","_this","setLoaded","target","classList","add","console","log","video","querySelector","width","clientWidth","height","clientHeight","style","concat","func","wait","immediate","timeout","context","args","clearTimeout","apply","callNow"],"mappings":"aAAAA,SAASC,iBAAiB,mBAAoB,SAASC,GAErDC,OAAAC,WAAAA,SAAAC,UAAAC,UACAF,SAAWA,UAAPE,QAAoBF,MAASC,UAAUC;2nCCH7C,IAAMC,SAAWJ,OAAOK,wBAA0BR,SAASS,aAKrDC,qB,WACJ,SAAAA,IAAgD,IAApCC,EAAoC,EAAAC,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAb,GAAIG,EAAS,EAAAH,UAAAC,OAAAD,UAAA,QAAAE,EAAAE,gBAAAC,KAAAP,GAC9CO,KAAKC,sBAAwBP,EACzBM,KAAKC,sBAAsBL,QAAU,IAIzCI,KAAKF,QAALI,cAAAA,cAAA,GAFuB,IAEgBJ,GACvCE,KAAKG,cAAgBH,KAAKI,SAASJ,KAAKG,cAAcE,KAAKL,MAAO,IAbhEV,KAAAA,e,6CAkBFU,KAAKM,aAbHb,KAAAA,kB,mCAC4C,IAAAc,EAAAP,KAiB9Cd,OAAOF,iBAAiB,SAAU,WAAQuB,EAAKJ,kBAE/CH,KAAKC,sBAAsBZ,QAAS,SAACK,GAlBhCO,EAAwBP,cAA7B,SACIV,iBAAKiB,UAAsBL,SAA3BX,GAAwCsB,EAAAC,UAAAvB,S,gCA0BpCA,GACIA,EAAMwB,OACZC,UAAUC,IAAI,2BAlBpBX,KAAAG,kB,sCAuBAS,QAAQC,IAAI,sBACZb,KAAKC,sBAAsBZ,QAAS,SAACK,GACnC,IAAIoB,EAAQpB,EArBHqB,cAAA,SAAAC,EAAAtB,EAAAuB,YAuBLC,EAASxB,EAAqByB,aAtBML,EAAAM,MAAKjB,MAAL,GAAAkB,OAAAL,EAAA,MAAsBF,EAAhEM,MAAAF,OAAA,OAGEA,EAASJ,EAAGpB,eACZoB,EAAM9B,MAAAA,MAAAA,OAAyC8B,EAAAM,MAAKZ,OAAL,GAAAa,OAAAH,EAAA,W,+BAmC1CI,EAAMC,EAAMC,GA3BnB,IAAAC,EACAX,OAAK,WACL,IAAAY,EAAKvB,KAALwB,EAAAhC,UAIAiB,EAAYY,IAAAC,EACZG,aAAK3B,GACHwB,EAAIX,WALP,WA6BKW,EAAU,KACLD,GAAWF,EAAKO,MAAMH,EAASC,IAzB1BjC,GACZoC,GAASR,EAAG5B,MAAAA,EAAAA,U","file":"clean-background-video.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function(event) {\r\n\r\n  // Polyfills\r\n  if (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = Array.prototype.forEach;\r\n  }\r\n\r\n});\r\n","const isIE11 = !!window.MSInputMethodContext && !!document.documentMode;\r\n\r\n/**\r\n * Entry point for the plugin.\r\n */\r\nclass CleanBackgroundVideo {\r\n  constructor(cleanBackgroundVideo = [], options) {\r\n    this.cleanBackgroundVideos = cleanBackgroundVideo;\r\n    if (this.cleanBackgroundVideos.length <= 0) return;\r\n    \r\n    const defaultOptions = { }\r\n\r\n    this.options = { ...defaultOptions, ...options };\r\n    this.setDimensions = this.debounce(this.setDimensions.bind(this), 50);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.bindEvents();\r\n    this.setDimensions();;\r\n  }\r\n\r\n  bindEvents() {\r\n    window.addEventListener('resize', () => { this.setDimensions() });\r\n\r\n    this.cleanBackgroundVideos.forEach( (cleanBackgroundVideo) => {\r\n      let video = cleanBackgroundVideo.querySelector('video');\r\n      video.addEventListener('canplay', (event) => { this.setLoaded(event) });\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Sets the loaded classes on video elements.\r\n   */\r\n  setLoaded(event) {\r\n    let video = event.target;\r\n    video.classList.add('background-video-loaded');\r\n    this.setDimensions();\r\n  }\r\n\r\n  setDimensions() {\r\n    console.log('setting dimensions');\r\n    this.cleanBackgroundVideos.forEach( (cleanBackgroundVideo) => {\r\n      let video = cleanBackgroundVideo.querySelector('video');\r\n      let width = cleanBackgroundVideo.clientWidth;\r\n      let height = cleanBackgroundVideo.clientHeight;\r\n\r\n      video.style.width = `${width}px`;\r\n      video.style.height = 'auto';\r\n\r\n      if (height > video.clientHeight) {\r\n        video.style.width = 'auto';\r\n        video.style.height = `${height}px`;\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  // Returns a function, that, as long as it continues to be invoked, will not\r\n  // be triggered. The function will be called after it stops being called for\r\n  // N milliseconds. If `immediate` is passed, trigger the function on the\r\n  // leading edge, instead of the trailing.\r\n  debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n      var context = this, args = arguments;\r\n      var later = function() {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      var callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    };\r\n  };\r\n}"]}