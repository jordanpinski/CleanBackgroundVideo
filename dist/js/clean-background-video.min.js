"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}document.addEventListener("DOMContentLoaded",function(t){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(t){function e(){for(var t=0;t<E.length;t++)E[t][0](E[t][1]);w=!(E=[])}function o(t,n){E.push([t,n]),w||(w=!0,g(e,0))}function n(t,n){function e(t){u(n,t)}try{t(function(t){f(n,t)},e)}catch(t){e(t)}}function r(n){var t=(e=n.owner).state_,e=e.data_,o=n[t];if(n=n.then,"function"==typeof o){t=v;try{e=o(e)}catch(t){u(n,t)}}i(n,e)||(t===v&&f(n,e),t===j&&u(n,e))}function i(n,e){var o;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===_typeof(e))){var t=e.then;if("function"==typeof t)return t.call(e,function(t){o||(o=!0,(e!==t?f:c)(n,t))},function(t){o||(o=!0,u(n,t))}),1}}catch(t){return o||u(n,t),1}}function f(t,n){t!==n&&i(t,n)||c(t,n)}function c(t,n){t.state_===_&&(t.state_=b,t.data_=n,o(s,t))}function u(t,n){t.state_===_&&(t.state_=b,t.data_=n,o(p,t))}function a(t){var n=t.then_;for(t.then_=void 0,t=0;t<n.length;t++)r(n[t])}function s(t){t.state_=v,a(t)}function p(t){t.state_=j,a(t)}function h(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(!1==this instanceof h)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],n(t,this)}var l,y=t.Promise,d=y&&"resolve"in y&&"reject"in y&&"all"in y&&"race"in y&&(new y(function(t){l=t}),"function"==typeof l);"undefined"!=typeof exports&&exports?(exports.Promise=d?y:h,exports.Polyfill=h):"function"==typeof define&&define.amd?define(function(){return d?y:h}):d||(t.Promise=h);function m(){}var w,_="pending",b="sealed",v="fulfilled",j="rejected",g="undefined"!=typeof setImmediate?setImmediate:setTimeout,E=[];h.prototype={constructor:h,state_:_,then_:null,data_:void 0,then:function(t,n){n={owner:this,then:new this.constructor(m),fulfilled:t,rejected:n};return this.state_===v||this.state_===j?o(r,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},h.all=function(f){if("[object Array]"!==Object.prototype.toString.call(f))throw new TypeError("You must pass an array to Promise.all().");return new this(function(e,t){for(var n,o=[],r=0,i=0;i<f.length;i++)(n=f[i])&&"function"==typeof n.then?n.then(function(n){return r++,function(t){o[n]=t,--r||e(o)}}(i),t):o[i]=n;r||e(o)})},h.race=function(r){if("[object Array]"!==Object.prototype.toString.call(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(t,n){for(var e,o=0;o<r.length;o++)(e=r[o])&&"function"==typeof e.then?e.then(t,n):t(e)})},h.resolve=function(n){return n&&"object"===_typeof(n)&&n.constructor===this?n:new this(function(t){t(n)})},h.reject=function(e){return new this(function(t,n){n(e)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this)});
"use strict";function ownKeys(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var isIE11=!!window.MSInputMethodContext&&!!document.documentMode,CleanBackgroundVideo=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;_classCallCheck(this,n),this.cleanBackgroundVideos=e,this.cleanBackgroundVideos.length<=0||(this.options=_objectSpread(_objectSpread({},{}),t),this.setDimensions=this.debounce(this.setDimensions.bind(this),50),this.init())}return _createClass(n,[{key:"init",value:function(){this.bindEvents(),this.setDimensions()}},{key:"bindEvents",value:function(){var n=this;window.addEventListener("resize",function(){n.setDimensions()}),this.cleanBackgroundVideos.forEach(function(e){var t=e.querySelector("video"),e=t.play();void 0!==e&&e.then(function(){n.setLoaded(null,t)}).catch(function(e){console.log(e)}),isIE11&&n.setLoaded(null,t)})}},{key:"setLoaded",value:function(e,t){t=1<arguments.length&&void 0!==t?t:null;(null!==e?e.target:t).classList.add("background-video-loaded"),this.setDimensions()}},{key:"setDimensions",value:function(){this.cleanBackgroundVideos.forEach(function(e){var t=e.querySelector("video"),n=e.clientWidth,e=e.clientHeight;t.style.width="".concat(n,"px"),t.style.height="auto",e>t.clientHeight&&(t.style.width="auto",t.style.height="".concat(e,"px"))})}},{key:"debounce",value:function(i,o,r){var c;return function(){var e=this,t=arguments,n=r&&!c;clearTimeout(c),c=setTimeout(function(){c=null,r||i.apply(e,t)},o),n&&i.apply(e,t)}}}]),n}();
//# sourceMappingURL=clean-background-video.min.js.map
